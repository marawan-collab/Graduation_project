2025-10-31 16:23:02,315 ERROR: Traceback (most recent call last):
  File "C:\xampp\htdocs\INFO\app.py", line 2336, in patient_radiology
    result, conf = analyze_mri_image(stored_path)
  File "C:\xampp\htdocs\INFO\mri_analysis.py", line 95, in analyze_mri_image
    model = _get_model()
  File "C:\xampp\htdocs\INFO\mri_analysis.py", line 41, in _get_model
    _model = load_model(model_path)
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\saving\saving_api.py", line 196, in load_model
    return legacy_h5_format.load_model_from_hdf5(
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\legacy\saving\legacy_h5_format.py", line 137, in load_model_from_hdf5
    model = saving_utils.model_from_config(
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\legacy\saving\saving_utils.py", line 83, in model_from_config
    return serialization.deserialize_keras_object(
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\legacy\saving\serialization.py", line 488, in deserialize_keras_object
    deserialized_obj = cls.from_config(
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\models\sequential.py", line 375, in from_config
    model.add(layer)
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\models\sequential.py", line 122, in add
    self._maybe_rebuild()
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\models\sequential.py", line 149, in _maybe_rebuild
    self.build(input_shape)
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\layers\layer.py", line 231, in build_wrapper
    original_build_method(*args, **kwargs)
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\models\sequential.py", line 195, in build
    x = layer(x)
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\utils\traceback_utils.py", line 122, in error_handler
    raise e.with_traceback(filtered_tb) from None
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\layers\reshaping\flatten.py", line 76, in compute_output_spec
    output_shape = self.compute_output_shape(inputs.shape)
AttributeError: Exception encountered when calling Flatten.call().

[1m'list' object has no attribute 'shape'[0m

Arguments received by Flatten.call():
  • args=(['<KerasTensor shape=(None, 4, 4, 512), dtype=float32, sparse=False, ragged=False, name=keras_tensor_37>'],)
  • kwargs=<class 'inspect._empty'>
 [in C:\xampp\htdocs\INFO\app.py:2347]
2025-10-31 16:26:54,418 ERROR: Error analyzing MRI image: Exception encountered when calling Flatten.call().

[1m'list' object has no attribute 'shape'[0m

Arguments received by Flatten.call():
  • args=(['<KerasTensor shape=(None, 4, 4, 512), dtype=float32, sparse=False, ragged=False, name=keras_tensor_37>'],)
  • kwargs=<class 'inspect._empty'> [in C:\xampp\htdocs\INFO\app.py:2346]
2025-10-31 16:26:54,435 ERROR: Traceback (most recent call last):
  File "C:\xampp\htdocs\INFO\app.py", line 2336, in patient_radiology
    result, conf = analyze_mri_image(stored_path)
  File "C:\xampp\htdocs\INFO\mri_analysis.py", line 92, in analyze_mri_image
    model = _get_model()
  File "C:\xampp\htdocs\INFO\mri_analysis.py", line 42, in _get_model
    _model = load_model(model_path)
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\saving\saving_api.py", line 196, in load_model
    return legacy_h5_format.load_model_from_hdf5(
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\legacy\saving\legacy_h5_format.py", line 137, in load_model_from_hdf5
    model = saving_utils.model_from_config(
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\legacy\saving\saving_utils.py", line 83, in model_from_config
    return serialization.deserialize_keras_object(
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\legacy\saving\serialization.py", line 488, in deserialize_keras_object
    deserialized_obj = cls.from_config(
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\models\sequential.py", line 375, in from_config
    model.add(layer)
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\models\sequential.py", line 122, in add
    self._maybe_rebuild()
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\models\sequential.py", line 149, in _maybe_rebuild
    self.build(input_shape)
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\layers\layer.py", line 231, in build_wrapper
    original_build_method(*args, **kwargs)
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\models\sequential.py", line 195, in build
    x = layer(x)
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\utils\traceback_utils.py", line 122, in error_handler
    raise e.with_traceback(filtered_tb) from None
  File "C:\xampp\htdocs\INFO\.venv\lib\site-packages\keras\src\layers\reshaping\flatten.py", line 76, in compute_output_spec
    output_shape = self.compute_output_shape(inputs.shape)
AttributeError: Exception encountered when calling Flatten.call().

[1m'list' object has no attribute 'shape'[0m

Arguments received by Flatten.call():
  • args=(['<KerasTensor shape=(None, 4, 4, 512), dtype=float32, sparse=False, ragged=False, name=keras_tensor_37>'],)
  • kwargs=<class 'inspect._empty'>
 [in C:\xampp\htdocs\INFO\app.py:2347]
2025-10-31 16:27:58,885 INFO: MRI analysis completed: Glioma, confidence: 0.758 [in C:\xampp\htdocs\INFO\app.py:2340]
2025-10-31 16:28:35,266 INFO: MRI analysis completed: Glioma, confidence: 0.556 [in C:\xampp\htdocs\INFO\app.py:2340]
2025-10-31 16:28:52,233 INFO: MRI analysis completed: Glioma, confidence: 0.851 [in C:\xampp\htdocs\INFO\app.py:2340]
2025-10-31 16:29:22,256 INFO: MRI analysis completed: Glioma, confidence: 0.947 [in C:\xampp\htdocs\INFO\app.py:2340]
2025-10-31 16:41:19,917 INFO: Found doctor_id: 26 for username: sam [in C:\xampp\htdocs\INFO\app.py:3117]
2025-10-31 16:41:19,919 INFO: Executing query: 
            SELECT a.id, a.appointment_date, a.status, a.reason,
                   CONCAT(u.first_name, ' ', u.last_name) as patient_name,
                   u.phone as patient_phone,
                   u.blood_type
            FROM appointments a
            JOIN users u ON a.patient_id = u.id
            WHERE a.doctor_id = %s
         ORDER BY a.appointment_date DESC [in C:\xampp\htdocs\INFO\app.py:3143]
2025-10-31 16:41:19,921 INFO: With parameters: [26] [in C:\xampp\htdocs\INFO\app.py:3144]
2025-10-31 16:41:19,937 INFO: Found 1 appointments [in C:\xampp\htdocs\INFO\app.py:3148]
2025-10-31 16:45:47,205 INFO: Found doctor_id: 26 for username: sam [in C:\xampp\htdocs\INFO\app.py:3117]
2025-10-31 16:45:47,206 INFO: Executing query: 
            SELECT a.id, a.appointment_date, a.status, a.reason,
                   CONCAT(u.first_name, ' ', u.last_name) as patient_name,
                   u.phone as patient_phone,
                   u.blood_type
            FROM appointments a
            JOIN users u ON a.patient_id = u.id
            WHERE a.doctor_id = %s
         ORDER BY a.appointment_date DESC [in C:\xampp\htdocs\INFO\app.py:3143]
2025-10-31 16:45:47,209 INFO: With parameters: [26] [in C:\xampp\htdocs\INFO\app.py:3144]
2025-10-31 16:45:47,211 INFO: Found 1 appointments [in C:\xampp\htdocs\INFO\app.py:3148]
2025-10-31 16:46:48,694 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient'} [in C:\xampp\htdocs\INFO\app.py:2096]
2025-10-31 16:46:48,701 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2174]
2025-10-31 16:47:11,321 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient'} [in C:\xampp\htdocs\INFO\app.py:2096]
2025-10-31 16:47:11,325 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2174]
2025-10-31 16:47:15,816 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient'} [in C:\xampp\htdocs\INFO\app.py:2096]
2025-10-31 16:47:15,819 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2174]
2025-10-31 16:47:19,108 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient'} [in C:\xampp\htdocs\INFO\app.py:2096]
2025-10-31 16:47:19,112 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2174]
2025-10-31 16:57:24,415 INFO: MRI analysis completed: Glioma, confidence: 0.912 [in C:\xampp\htdocs\INFO\app.py:2367]
2025-10-31 17:05:33,722 INFO: MRI analysis completed: Glioma, confidence: 0.881 [in C:\xampp\htdocs\INFO\app.py:2367]
2025-10-31 17:07:50,121 INFO: MRI analysis completed: Glioma, confidence: 0.937 [in C:\xampp\htdocs\INFO\app.py:2367]
2025-10-31 17:08:01,326 INFO: MRI analysis completed: Glioma, confidence: 0.977 [in C:\xampp\htdocs\INFO\app.py:2367]
2025-10-31 17:09:42,224 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient'} [in C:\xampp\htdocs\INFO\app.py:2096]
2025-10-31 17:09:42,240 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2174]
2025-10-31 17:10:03,490 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient'} [in C:\xampp\htdocs\INFO\app.py:2096]
2025-10-31 17:10:03,495 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2174]
2025-10-31 17:16:03,857 INFO: MRI analysis completed: Glioma, confidence: 0.985 [in C:\xampp\htdocs\INFO\app.py:2367]
2025-10-31 17:16:20,002 INFO: MRI analysis completed: Glioma, confidence: 0.934 [in C:\xampp\htdocs\INFO\app.py:2367]
2025-10-31 17:16:28,889 INFO: MRI analysis completed: Glioma, confidence: 0.881 [in C:\xampp\htdocs\INFO\app.py:2367]
2025-10-31 17:18:19,976 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient'} [in C:\xampp\htdocs\INFO\app.py:2096]
