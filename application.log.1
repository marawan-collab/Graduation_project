2025-11-01 15:55:17,333 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient', 'first_name': 'ahmed'} [in C:\xampp\htdocs\INFO\app.py:2117]
2025-11-01 15:55:17,370 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2195]
2025-11-01 15:58:19,591 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient', 'first_name': 'ahmed'} [in C:\xampp\htdocs\INFO\app.py:2117]
2025-11-01 15:58:19,595 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2195]
2025-11-01 15:59:01,807 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient', 'first_name': 'ahmed'} [in C:\xampp\htdocs\INFO\app.py:2117]
2025-11-01 15:59:01,810 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2195]
2025-11-01 16:00:04,611 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient', 'first_name': 'ahmed'} [in C:\xampp\htdocs\INFO\app.py:2117]
2025-11-01 16:00:04,614 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2195]
2025-11-01 18:28:52,517 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient', 'first_name': 'ahmed'} [in C:\xampp\htdocs\INFO\app.py:2117]
2025-11-01 18:28:52,534 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2195]
2025-11-01 18:41:11,815 WARNING: Watermarking failed for uploads\radiology\27\brain_mRI3\1762015269_Te-noTr_0003.jpg.tmp: 'ImageDraw' object has no attribute 'textsize' [in C:\xampp\htdocs\INFO\app.py:2453]
2025-11-01 18:41:11,850 ERROR: MRI analysis failed: Image file not found: uploads\radiology\27\brain_mRI3\1762015269_Te-noTr_0003.jpg [in C:\xampp\htdocs\INFO\app.py:2785]
2025-11-01 18:42:56,632 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient', 'first_name': 'ahmed'} [in C:\xampp\htdocs\INFO\app.py:2117]
2025-11-01 18:42:56,636 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2195]
2025-11-01 18:44:51,116 INFO: Deleted folder directory and all contents: uploads\radiology\27\doctor_ahmed [in C:\xampp\htdocs\INFO\app.py:2638]
2025-11-01 18:44:51,119 INFO: Deleted radiology folder 'doctor_ahmed' (Patient ID: 27) [in C:\xampp\htdocs\INFO\app.py:2644]
2025-11-01 18:54:23,130 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient', 'first_name': 'ahmed'} [in C:\xampp\htdocs\INFO\app.py:2117]
2025-11-01 18:54:23,145 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2195]
2025-11-01 18:58:24,392 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient', 'first_name': 'ahmed'} [in C:\xampp\htdocs\INFO\app.py:2117]
2025-11-01 18:58:24,396 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2195]
2025-11-01 22:43:14,806 INFO: Deleted radiology file from filesystem: uploads\radiology\27\brain_mRI3\1762015260_Te-noTr_0003.pdf [in C:\xampp\htdocs\INFO\app.py:3079]
2025-11-01 22:43:14,820 INFO: Deleted radiology file Te-noTr_0003.pdf (ID: 74) from database [in C:\xampp\htdocs\INFO\app.py:3090]
2025-11-01 23:06:26,908 INFO: Deleted radiology file Te-noTr_0003.jpg (ID: 75) from database [in C:\xampp\htdocs\INFO\app.py:3090]
2025-11-01 23:31:19,730 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient', 'first_name': 'ahmed'} [in C:\xampp\htdocs\INFO\app.py:2117]
2025-11-01 23:31:19,736 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2195]
2025-11-01 23:31:31,757 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient', 'first_name': 'ahmed'} [in C:\xampp\htdocs\INFO\app.py:2117]
2025-11-01 23:31:31,763 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2195]
2025-11-01 23:57:21,042 INFO: Action: login_manual_password_success, User: ahmed, Details: Password verified for user ahmed. Proceeding to 2FA. [in C:\xampp\htdocs\INFO\app.py:893]
2025-11-01 23:57:55,779 INFO: Action: login_manual_2fa_success, User: ahmed, Details: User ahmed successfully completed 2FA and logged in manually. [in C:\xampp\htdocs\INFO\app.py:893]
2025-11-01 23:57:55,853 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient', 'first_name': 'ahmed', '_flashes': [('success', 'Successfully logged in')]} [in C:\xampp\htdocs\INFO\app.py:2117]
2025-11-01 23:57:55,859 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2195]
2025-11-02 00:03:00,534 INFO: Accessing patient dashboard. Session data: {'_permanent': True, 'username': 'ahmed', 'role': 'patient', 'first_name': 'ahmed'} [in C:\xampp\htdocs\INFO\app.py:2117]
2025-11-02 00:03:00,537 INFO: Successfully loaded dashboard for patient: ahmed [in C:\xampp\htdocs\INFO\app.py:2195]
2025-11-02 00:08:40,124 INFO: Found doctor_id: 26 for username: sam [in C:\xampp\htdocs\INFO\app.py:4515]
2025-11-02 00:08:40,129 INFO: Executing query: 
            SELECT a.id, a.appointment_date, a.status, a.reason,
                   CONCAT(u.first_name, ' ', u.last_name) as patient_name,
                   u.phone as patient_phone,
                   u.blood_type
            FROM appointments a
            JOIN users u ON a.patient_id = u.id
            WHERE a.doctor_id = %s
         ORDER BY a.appointment_date DESC [in C:\xampp\htdocs\INFO\app.py:4541]
2025-11-02 00:08:40,152 INFO: With parameters: [26] [in C:\xampp\htdocs\INFO\app.py:4542]
2025-11-02 00:08:40,169 INFO: Found 2 appointments [in C:\xampp\htdocs\INFO\app.py:4546]
2025-11-02 00:40:18,109 WARNING: Watermarking failed for uploads\radiology\27\Hossam\1762036817_Y1.jpg.tmp: 'ImageDraw' object has no attribute 'textsize' [in C:\xampp\htdocs\INFO\app.py:2453]
2025-11-02 00:40:18,115 ERROR: MRI analysis failed: Image file not found: uploads\radiology\27\Hossam\1762036817_Y1.jpg [in C:\xampp\htdocs\INFO\app.py:2785]
2025-11-02 00:53:10,682 ERROR: File not found: uploads\radiology\27\Hossam\1762036817_Y1.jpg (stored_name: Hossam\1762036817_Y1.jpg, user_dir: uploads\radiology\27) [in C:\xampp\htdocs\INFO\app.py:2990]
2025-11-02 00:53:15,755 INFO: Deleted radiology file Y1.jpg (ID: 80) from database [in C:\xampp\htdocs\INFO\app.py:3113]
2025-11-02 00:53:26,182 WARNING: Watermarking failed for uploads\radiology\27\Hossam\1762037606_Y1.jpg.tmp: 'ImageDraw' object has no attribute 'textsize' [in C:\xampp\htdocs\INFO\app.py:2453]
2025-11-02 00:53:26,184 ERROR: Model file missing for MRI analysis: Image file not found: uploads\radiology\27\Hossam\1762037606_Y1.jpg [in C:\xampp\htdocs\INFO\app.py:2785]
2025-11-02 00:53:26,191 ERROR: Traceback (most recent call last):
  File "C:\xampp\htdocs\INFO\app.py", line 2779, in upload_radiology_in_folder
    result, conf = analyze_mri_image(stored_path)
  File "C:\xampp\htdocs\INFO\mri_analysis.py", line 90, in analyze_mri_image
    raise FileNotFoundError(f"Image file not found: {image_path}")
FileNotFoundError: Image file not found: uploads\radiology\27\Hossam\1762037606_Y1.jpg
 [in C:\xampp\htdocs\INFO\app.py:2786]
2025-11-02 00:53:26,988 ERROR: File not found: uploads\radiology\27\Hossam\1762037606_Y1.jpg (stored_name: Hossam\1762037606_Y1.jpg, user_dir: uploads\radiology\27) [in C:\xampp\htdocs\INFO\app.py:2990]
2025-11-02 00:55:22,779 ERROR: File not found: uploads\radiology\27\Hossam\1762037606_Y1.jpg (stored_name: Hossam\1762037606_Y1.jpg, user_dir: uploads\radiology\27) [in C:\xampp\htdocs\INFO\app.py:2991]
2025-11-02 00:55:47,810 WARNING: Watermarking failed for uploads\radiology\27\Hossam\1762037747_24_no.jpg.tmp: 'ImageDraw' object has no attribute 'textsize' [in C:\xampp\htdocs\INFO\app.py:2456]
2025-11-02 00:55:47,813 WARNING: MRI model not available - skipping analysis. File uploaded successfully. [in C:\xampp\htdocs\INFO\app.py:2789]
2025-11-02 00:55:48,653 ERROR: File not found: uploads\radiology\27\Hossam\1762037606_Y1.jpg (stored_name: Hossam\1762037606_Y1.jpg, user_dir: uploads\radiology\27) [in C:\xampp\htdocs\INFO\app.py:2991]
2025-11-02 00:55:48,658 ERROR: File not found: uploads\radiology\27\Hossam\1762037747_24_no.jpg (stored_name: Hossam\1762037747_24_no.jpg, user_dir: uploads\radiology\27) [in C:\xampp\htdocs\INFO\app.py:2991]
2025-11-02 00:56:47,402 ERROR: File not found: uploads\radiology\27\brain_mRI\1761929854_1_no.jpeg (stored_name: brain_mRI\1761929854_1_no.jpeg, user_dir: uploads\radiology\27) [in C:\xampp\htdocs\INFO\app.py:2991]
2025-11-02 00:56:47,405 ERROR: File not found: uploads\radiology\27\brain_mRI\1761930454_1_no.jpeg (stored_name: brain_mRI\1761930454_1_no.jpeg, user_dir: uploads\radiology\27) [in C:\xampp\htdocs\INFO\app.py:2991]
2025-11-02 00:56:54,825 INFO: Deleted radiology file 1 no.jpeg (ID: 67) from database [in C:\xampp\htdocs\INFO\app.py:3114]
2025-11-02 00:56:55,063 ERROR: File not found: uploads\radiology\27\brain_mRI\1761929854_1_no.jpeg (stored_name: brain_mRI\1761929854_1_no.jpeg, user_dir: uploads\radiology\27) [in C:\xampp\htdocs\INFO\app.py:2991]
2025-11-02 00:56:59,552 INFO: Deleted radiology file 1 no.jpeg (ID: 66) from database [in C:\xampp\htdocs\INFO\app.py:3114]
2025-11-02 00:57:17,182 ERROR: File not found: uploads\radiology\27\Hossam\1762037606_Y1.jpg (stored_name: Hossam\1762037606_Y1.jpg, user_dir: uploads\radiology\27) [in C:\xampp\htdocs\INFO\app.py:2991]
2025-11-02 00:57:17,186 ERROR: File not found: uploads\radiology\27\Hossam\1762037747_24_no.jpg (stored_name: Hossam\1762037747_24_no.jpg, user_dir: uploads\radiology\27) [in C:\xampp\htdocs\INFO\app.py:2991]
2025-11-02 00:57:21,436 INFO: Deleted radiology file Y1.jpg (ID: 81) from database [in C:\xampp\htdocs\INFO\app.py:3114]
